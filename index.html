<!DOCTYPE html>
<html lang="ru" data-theme="light">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>–ü–æ–ª–æ–≤–∏–Ω–∫–∏ ‚Äî –î–æ–º–∞—à–Ω—è—è –∫–æ–Ω–¥–∏—Ç–µ—Ä—Å–∫–∞—è</title>
  <meta name="description" content="–ü–æ–ª–æ–≤–∏–Ω–∫–∏ –ö–ú–í ‚Äî –¥–æ–º–∞—à–Ω—è—è –∫–æ–Ω–¥–∏—Ç–µ—Ä—Å–∫–∞—è. –û—Ä–µ—à–∫–∏ —Å –≤–∞—Ä—ë–Ω–æ–π —Å–≥—É—â—ë–Ω–∫–æ–π. –ó–∞–∫–∞–∂–∏—Ç–µ –æ–Ω–ª–∞–π–Ω –∫ –ù–æ–≤–æ–º—É –≥–æ–¥—É!">

  <meta name="robots" content="index,follow">
  <link rel="canonical" href="https://polovinkikmv.ru/">
  <link rel="icon" type="image/x-icon" href="favicon.ico">
  <meta name="theme-color" content="#f6f1eb">

  <meta property="og:type" content="website">
  <meta property="og:title" content="–ü–æ–ª–æ–≤–∏–Ω–∫–∏ ‚Äî –ù–æ–≤–æ–≥–æ–¥–Ω–µ–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ">
  <meta property="og:description" content="–û—Ä–µ—à–∫–∏ —Å –≤–∞—Ä—ë–Ω–æ–π —Å–≥—É—â—ë–Ω–∫–æ–π. –í–∫—É—Å –¥–µ—Ç—Å—Ç–≤–∞ –Ω–∞ –≤–∞—à–µ–º –ø—Ä–∞–∑–¥–Ω–∏—á–Ω–æ–º —Å—Ç–æ–ª–µ.">

  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Cormorant+Garamond:wght@400;500;600&display=swap" rel="stylesheet">

  <style>
    :root {
      --bg:#f6f1eb; --fg:#3e2c23; --muted:#8a6a58;
      --xmas-red:#c92a2a; --xmas-red-dark:#a61e1e; --xmas-green:#2f5d43;
      --gold:#e6b800;
      --shadow:0 12px 40px rgba(62,44,35,0.12);
      --radius:20px;
      --h1:clamp(32px,5vw,56px);
      --h2:clamp(20px,2.5vw,26px);
      --p:clamp(17px,1.8vw,19px);
      --container:min(1120px,92vw);
    }

    *{box-sizing:border-box}
    html,body{scroll-behavior:smooth}
    body{
      margin:0;
      font-family:'Cormorant Garamond',serif;
      background:var(--bg);
      color:var(--fg);
      line-height:1.6;
      text-align:center;
      overflow-x:hidden;
      position:relative;
    }
    body::before{
      content:"";
      position:fixed; inset:0;
      pointer-events:none;
      z-index:-1;
      opacity:.15;
      background-image:url("data:image/svg+xml,%3Csvg width='200' height='200' viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='1'/%3E%3C/svg%3E");
    }

    /* ====== –ì–ò–†–õ–Ø–ù–î–ê (–°–ö–†–û–õ–õ–ò–¢–°–Ø) ====== */
    .garland-wrap{
      position:absolute;
      top:-10px; left:0; width:100%;
      z-index:20;
      pointer-events:none;
      overflow:visible;
      filter:drop-shadow(0 8px 16px rgba(0,0,0,0.12));
      transform-origin:top center;
      animation:garlandSway 6.8s ease-in-out infinite;
    }
    .garland{
      width:100%;
      height:180px;
      display:block;
      overflow:visible;
    }
    @keyframes garlandSway{
      0%,100%{transform:translateY(0) rotate(0deg)}
      50%{transform:translateY(1px) rotate(0.12deg)}
    }

    .bulb{transform-origin:center}
    .blink-a{animation:blink 2.2s infinite}
    .blink-b{animation:blink 2.7s infinite .35s}
    .blink-c{animation:blink 3.1s infinite .8s}
    @keyframes blink{
      0%,100%{opacity:1}
      45%{opacity:.55}
      70%{opacity:.92}
    }
    @media (prefers-reduced-motion:reduce){
      .garland-wrap,.blink-a,.blink-b,.blink-c{animation:none!important}
    }

    .snow-cap{position:relative;display:inline-block;z-index:2}
    .snow-cap::before{
      content:"";
      position:absolute;
      top:-14px; left:-4%; width:108%; height:26px;
      background-image:url("data:image/svg+xml,%3Csvg viewBox='0 0 200 40' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0 25 Q 10 25 20 35 Q 30 45 40 30 Q 50 15 60 25 Q 70 35 80 20 Q 90 5 100 20 Q 110 35 120 25 Q 130 15 140 30 Q 150 45 160 30 Q 170 15 180 25 Q 190 35 200 20 L 200 0 L 0 0 Z' fill='white'/%3E");
      background-size:100% 100%;
      filter:drop-shadow(0 2px 3px rgba(0,0,0,0.1));
      pointer-events:none;
    }

    h1{font-size:var(--h1);margin:0 0 .3em;font-weight:700;font-family:'Playfair Display',serif;color:var(--fg);text-shadow:0 2px 0 rgba(255,255,255,.5)}
    h2{font-size:var(--h2);font-weight:500;margin:0 0 1.2em;color:var(--xmas-green);letter-spacing:.5px}
    p{font-size:var(--p);margin:0 auto 1em;max-width:68ch}

    .container{width:var(--container);margin-inline:auto;position:relative;z-index:2}
    section{padding:clamp(40px,6vw,80px) 0}

    /* ====== –ö–ù–û–ü–ö–ò ====== */
    .btn{
      display:inline-block;
      padding:1em 2.4em;
      margin-top:1.2em;
      background:linear-gradient(135deg,var(--xmas-red),var(--xmas-red-dark));
      color:#fff;
      font-size:clamp(15px,1.5vw,18px);
      border-radius:50px;
      text-decoration:none;
      font-weight:600;
      letter-spacing:.5px;
      border:2px solid #fff;
      box-shadow:0 4px 15px rgba(201,42,42,.4);
      transition:all .3s cubic-bezier(.25,.8,.25,1);
      position:relative;
      overflow:hidden;
      cursor:pointer;
    }
    .btn::after{
      content:"";
      position:absolute;top:0;left:-100%;
      width:100%;height:100%;
      background:linear-gradient(90deg,transparent,rgba(255,255,255,.3),transparent);
      transition:.5s;
    }
    .btn:hover{transform:translateY(-2px);box-shadow:0 6px 20px rgba(201,42,42,.6)}
    .btn:hover::after{left:100%}
    .btn:disabled{opacity:.7;cursor:not-allowed;transform:none}

    .btn-outline{
      background:transparent;
      color:var(--xmas-green);
      border:2px solid var(--xmas-green);
      box-shadow:none;
      padding:.85em 1.8em;
      border-radius:50px;
      text-decoration:none;
      font-weight:600;
      cursor:pointer;
      display:inline-block;
    }
    .btn-outline:hover{background:var(--xmas-green);color:#fff}

    /* ====== HERO ====== */
    .hero{margin-top:50px}
    .hero-grid{display:grid;gap:40px;align-items:center}
    @media (min-width:900px){.hero-grid{grid-template-columns:1fr 1fr;text-align:left}}

    .logo{
      width:clamp(200px,35vw,320px);
      height:auto;
      filter:drop-shadow(0 10px 20px rgba(0,0,0,0.1));
      border-radius:50%;
      border:4px solid #fff;
    }

    /* ====== –ö–ê–†–¢–û–ß–ö–ò / –§–û–†–ú–ê ====== */
    .card,.reviews-card{
      background:#fff;
      border-radius:var(--radius);
      padding:clamp(24px,4vw,40px);
      border:1px solid rgba(0,0,0,0.05);
      box-shadow:var(--shadow);
      text-align:left;
      position:relative;
      overflow:hidden;
    }
    .card::before,.reviews-card::before{
      content:"";
      position:absolute;top:0;left:0;right:0;height:6px;
      background:repeating-linear-gradient(45deg,var(--xmas-red),var(--xmas-red) 10px,#fff 10px,#fff 20px);
    }

    .grid{display:grid;gap:20px}
    @media (min-width:700px){.grid{grid-template-columns:1fr 1fr}}

    .row{display:flex;flex-direction:column}

    label{display:block;font-size:.95rem;color:var(--muted);margin-bottom:8px;font-weight:600}
    input,select,textarea{
      width:100%;
      padding:14px 16px;
      border-radius:12px;
      border:1px solid rgba(0,0,0,0.1);
      background:#fdfdfd;
      font-family:inherit;
      font-size:1rem;
      color:var(--fg);
      transition:all .2s;
      outline:none;
    }
    input:focus,select:focus,textarea:focus{
      border-color: rgba(47,93,67,0.45);
      box-shadow: 0 0 0 4px rgba(47,93,67,0.10);
    }

    .summary{
      background:#fdfae7;
      border:2px dashed #e6cfaa;
      padding:16px;
      border-radius:12px;
      margin-top:12px;
      display:flex;
      justify-content:space-between;
      align-items:center;
      flex-wrap:wrap;
      gap:10px;
    }
    .summary strong{color:var(--xmas-red);font-size:1.2em}
    .muted{color:var(--muted)}
    .actions{display:flex;justify-content:center;margin-top:18px}
    .note{margin-top:12px;color:var(--xmas-green);text-align:center}

    /* ====== –ü–†–û–ß–ï–ï ====== */
    .divider{display:flex;align-items:center;justify-content:center;margin:40px auto;gap:10px;opacity:.6}
    .divider::before,.divider::after{content:"";height:1px;width:60px;background:var(--gold)}
    .divider span{font-size:20px;color:var(--gold)}

    .fade-in{opacity:0;transform:translateY(30px);transition:all .8s ease-out}
    .fade-in.visible{opacity:1;transform:translateY(0)}

    footer{background:var(--fg);color:#efe3d0;padding:40px 0;margin-top:60px}
    .footer-actions{margin-top:14px;display:flex;justify-content:center;gap:12px;flex-wrap:wrap}

    dialog{border:none;border-radius:20px;padding:0;width:min(600px,94vw);box-shadow:0 25px 50px rgba(0,0,0,0.25)}
    dialog::backdrop{background:rgba(62,44,35,0.4);backdrop-filter:blur(2px)}
    .modal-body{padding:30px}
    .modal-close{border:0;background:rgba(0,0,0,0.06);color:var(--fg);border-radius:12px;padding:8px 12px;cursor:pointer;font:inherit}
    .modal-close:hover{background:rgba(0,0,0,0.10)}

    .stars{color:var(--gold)}
    .reviews-strip{background:#fffbf6;border:1px solid #efe3d0;border-radius:16px;padding:16px;margin-top:20px}
    .strip-track{display:grid;grid-auto-flow:column;grid-auto-columns:min(300px,80%);gap:16px;overflow-x:auto;padding-bottom:10px;scroll-snap-type:x mandatory}
    .review-mini{background:#fff;padding:16px;border-radius:12px;box-shadow:0 4px 12px rgba(0,0,0,0.04);border:1px solid rgba(0,0,0,0.03);scroll-snap-align:start;cursor:pointer;display:flex;flex-direction:column;gap:6px;text-align:left}

    #snow-canvas{position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:9999}
  </style>
</head>
<body>

  <canvas id="snow-canvas"></canvas>

  <!-- –ì–ò–†–õ–Ø–ù–î–ê -->
  <div class="garland-wrap" aria-hidden="true">
    <svg class="garland" viewBox="-80 0 1360 190" preserveAspectRatio="none" style="overflow:visible">
      <defs>
        <linearGradient id="wireGrad" x1="0" x2="0" y1="0" y2="1">
          <stop offset="0" stop-color="#2a2a2a"/>
          <stop offset="1" stop-color="#0f0f0f"/>
        </linearGradient>

        <radialGradient id="glass" cx="35%" cy="30%" r="70%">
          <stop offset="0" stop-color="rgba(255,255,255,0.85)"/>
          <stop offset="0.35" stop-color="rgba(255,255,255,0.35)"/>
          <stop offset="1" stop-color="rgba(255,255,255,0.10)"/>
        </radialGradient>

        <filter id="glow" x="-120%" y="-120%" width="340%" height="340%">
          <feGaussianBlur stdDeviation="7" result="b"/>
          <feMerge>
            <feMergeNode in="b"/>
            <feMergeNode in="SourceGraphic"/>
          </feMerge>
        </filter>

        <filter id="softShadow" x="-40%" y="-40%" width="180%" height="180%">
          <feDropShadow dx="0" dy="2" stdDeviation="2" flood-color="rgba(0,0,0,0.28)"/>
        </filter>

        <path id="wirePath" d="M-60,28 C 260,132 480,6 720,98 C 940,182 1080,50 1280,110" />
      </defs>

      <use href="#wirePath" fill="none" stroke="url(#wireGrad)" stroke-width="4.6" stroke-linecap="round" opacity="0.95"/>
      <use href="#wirePath" fill="none" stroke="rgba(255,255,255,0.12)" stroke-width="1.4" stroke-linecap="round" opacity="0.65" transform="translate(0,-2)"/>

      <g id="bulbs"></g>
    </svg>
  </div>

  <section class="hero fade-in">
    <div class="container hero-grid">
      <div class="logo-wrap" style="text-align:center;">
        <img src="logo.png" alt="–õ–æ–≥–æ—Ç–∏–ø –ü–æ–ª–æ–≤–∏–Ω–∫–∏" class="logo" loading="lazy">
      </div>
      <div>
        <h1 class="snow-cap">–ü–æ–ª–æ–≤–∏–Ω–∫–∏</h1>
        <h2>–î–æ–º–∞—à–Ω—è—è –∫–æ–Ω–¥–∏—Ç–µ—Ä—Å–∫–∞—è</h2>
        <p><em>–û—Ä–µ—à–∫–∏ ‚Äî –≤–∫—É—Å, –∫–æ—Ç–æ—Ä—ã–π –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤ –¥–µ—Ç—Å—Ç–≤–æ.</em></p>
        <p>–•—Ä—É—Å—Ç—è—â–∞—è —Å–∫–æ—Ä–ª—É–ø–∫–∞, –Ω–µ–∂–Ω–æ–µ —Ç–µ—Å—Ç–æ –∏ –º–Ω–æ–≥–æ –≤–∞—Ä—ë–Ω–æ–π —Å–≥—É—â—ë–Ω–∫–∏ —Å –≥—Ä–µ—Ü–∫–∏–º –æ—Ä–µ—Ö–æ–º. –ò–¥–µ–∞–ª—å–Ω–æ–µ —É–≥–æ—â–µ–Ω–∏–µ –∫ –ø—Ä–∞–∑–¥–Ω–∏—á–Ω–æ–º—É —á–∞–µ–ø–∏—Ç–∏—é –∏–ª–∏ –≤ –ø–æ–¥–∞—Ä–æ–∫ –±–ª–∏–∑–∫–∏–º.</p>

        <!-- –ö–ù–û–ü–ö–ê ‚Äú–°–î–ï–õ–ê–¢–¨ –ó–ê–ö–ê–ó‚Äù -->
        <a href="#order" class="btn">–°–¥–µ–ª–∞—Ç—å –∑–∞–∫–∞–∑</a>
      </div>
    </div>
  </section>

  <div class="divider"><span>‚ùÑÔ∏è</span></div>

  <section class="fade-in">
    <div class="container">
      <p style="font-size: 1.2rem; max-width: 700px; margin: auto;">
        –ú—ã –≥–æ—Ç–æ–≤–∏–º —Ç–æ–ª—å–∫–æ –æ–¥–Ω–æ –ª–∞–∫–æ–º—Å—Ç–≤–æ, –¥–æ–≤–µ–¥—ë–Ω–Ω–æ–µ –¥–æ —Å–æ–≤–µ—Ä—à–µ–Ω—Å—Ç–≤–∞.
        –í –∫–∞–∂–¥–æ–º –æ—Ä–µ—à–∫–µ ‚Äî —Ç–µ–ø–ª–æ –Ω–∞—à–∏—Ö —Ä—É–∫ –∏ —á–∞—Å—Ç–∏—á–∫–∞ –Ω–æ–≤–æ–≥–æ–¥–Ω–µ–≥–æ —á—É–¥–∞.
      </p>
    </div>
  </section>

  <div class="divider"><span>üéÑ</span></div>

  <!-- ======= –§–û–†–ú–ê –ó–ê–ö–ê–ó–ê (–ê–î–ê–ü–¢–ò–†–û–í–ê–ù–ê –ò –í–°–¢–ê–í–õ–ï–ù–ê) ======= -->
  <section id="order" class="fade-in" aria-labelledby="order-title">
    <div class="container">
      <h1 id="order-title" class="snow-cap" style="margin-bottom:.2em; text-align:center;">–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞</h1>
      <p class="muted" style="margin-bottom:1.2em; text-align:center;">
        –¢–æ–≤–∞—Ä: <strong>–ö–æ—Ä–æ–±–æ—á–∫–∞ –æ—Ä–µ—à–∫–æ–≤ (6 —à—Ç)</strong> ‚Äî <strong>250 ‚ÇΩ –∑–∞ –∫–æ—Ä–æ–±–∫—É</strong>
      </p>

      <div class="card" role="region" aria-label="–§–æ—Ä–º–∞ –∑–∞–∫–∞–∑–∞">
        <form id="order-form" action="https://formspree.io/f/xgvleerr" method="POST" autocomplete="on" novalidate>
          <div class="grid">
            <div class="row">
              <label for="name">–ò–º—è –∏ —Ñ–∞–º–∏–ª–∏—è*</label>
              <input id="name" name="name" required autocomplete="name">
            </div>

            <div class="row">
              <label for="phone">–¢–µ–ª–µ—Ñ–æ–Ω –¥–ª—è —Å–≤—è–∑–∏*</label>
              <input id="phone" name="phone" inputmode="tel" required
                     placeholder="+7 999 123-45-67"
                     pattern="^[\\d\\+\\-\\s\\(\\)]{7,}$"
                     autocomplete="tel">
            </div>

            <div class="row">
              <label for="social">–°–æ—Ü—Å–µ—Ç–∏ (WhatsApp/Telegram)</label>
              <input id="social" name="social" placeholder="+7 999 123-45-67 –∏–ª–∏ @username">
            </div>

            <div class="row">
              <label for="qty">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ—Ä–æ–±–æ—á–µ–∫*</label>
              <select id="qty" name="qty" required>
                <option value="1" selected>1 –∫–æ—Ä–æ–±–∫–∞ ‚Äî 6 —à—Ç</option>
                <option value="2">2 –∫–æ—Ä–æ–±–∫–∏ ‚Äî 12 —à—Ç</option>
                <option value="3">3 –∫–æ—Ä–æ–±–∫–∏ ‚Äî 18 —à—Ç</option>
                <option value="4">4 –∫–æ—Ä–æ–±–∫–∏ ‚Äî 24 —à—Ç</option>
                <option value="5">5 –∫–æ—Ä–æ–±–æ–∫ ‚Äî 30 —à—Ç</option>
              </select>
            </div>

            <div class="row">
              <label for="date">–ñ–µ–ª–∞–µ–º–∞—è –¥–∞—Ç–∞ –ø–æ–ª—É—á–µ–Ω–∏—è*</label>
              <input type="date" id="date" name="date" required>
            </div>

            <div class="row">
              <label for="time">–í—Ä–µ–º—è (–æ—Ä–∏–µ–Ω—Ç–∏—Ä)</label>
              <input type="time" id="time" name="time">
            </div>

            <div class="row" style="grid-column: 1 / -1;">
              <label for="method">–°–ø–æ—Å–æ–± –ø–æ–ª—É—á–µ–Ω–∏—è (–µ—Å–ª–∏ –∑–∞–∫–∞–∑ &lt; 15 —É–ø–∞–∫–æ–≤–æ–∫, –¥–æ—Å—Ç–∞–≤–∫–∞ –ø–ª–∞—Ç–Ω–∞—è)</label>
              <select id="method" name="method">
                <option value="pickup" selected>–°–∞–º–æ–≤—ã–≤–æ–∑</option>
                <option value="delivery">–î–æ—Å—Ç–∞–≤–∫–∞</option>
              </select>
            </div>

            <div class="row" id="address-row" style="display:none; grid-column: 1 / -1;">
              <label for="address">–ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏</label>
              <input id="address" name="address" placeholder="–ì–æ—Ä–æ–¥, —É–ª–∏—Ü–∞, –¥–æ–º, –ø–æ–¥—ä–µ–∑–¥" autocomplete="street-address">
            </div>

            <div class="row" style="grid-column: 1 / -1;">
              <label for="comment">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –∑–∞–∫–∞–∑—É</label>
              <textarea id="comment" name="comment" rows="3" placeholder="–ü–æ–∂–µ–ª–∞–Ω–∏—è –ø–æ –≤—Ä–µ–º–µ–Ω–∏, –ø–æ–¥–ø–∏—Å–∞—Ç—å –æ—Ç–∫—Ä—ã—Ç–∫—É –∏ —Ç.–¥."></textarea>
            </div>
          </div>

          <div class="summary" aria-live="polite">
            <span>–ò—Ç–æ–≥–æ: <strong id="total-text">250 ‚ÇΩ</strong></span>
            <span class="muted">250 ‚ÇΩ √ó <span id="qty-text">1</span> –∫–æ—Ä–æ–±.</span>
          </div>

          <div class="actions">
            <button id="submit-btn" type="submit" class="btn">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–∫–∞–∑</button>
          </div>

          <p id="form-status" class="note" style="display:none;"></p>
        </form>
      </div>
    </div>
  </section>

  <div class="divider"><span>üéÅ</span></div>

  <section id="reviews-section" class="fade-in">
    <div class="container">
      <h1 class="snow-cap" style="text-align:center;">–û—Ç–∑—ã–≤—ã –≥–æ—Å—Ç–µ–π</h1>

      <div class="reviews-card">
        <form id="reviewForm" style="display:grid; gap:10px;">
          <input type="text" name="name" placeholder="–í–∞—à–µ –∏–º—è" required>
          <textarea name="text" placeholder="–ù–∞–ø–∏—à–∏—Ç–µ –ø–∞—Ä—É —Ç–µ–ø–ª—ã—Ö —Å–ª–æ–≤..." rows="3" required></textarea>
          <div style="display:flex; justify-content:space-between; align-items:center;">
            <select name="rating" style="width:auto;">
              <option value="5">‚≠êÔ∏è‚≠êÔ∏è‚≠êÔ∏è‚≠êÔ∏è‚≠êÔ∏è (5)</option>
              <option value="4">‚≠êÔ∏è‚≠êÔ∏è‚≠êÔ∏è‚≠êÔ∏è (4)</option>
            </select>
            <button type="submit" class="btn" style="margin:0; padding: 0.8em 1.5em; font-size: 0.9rem;">–û—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤</button>
          </div>
          <small id="reviewStatus" style="color:var(--muted)"></small>
        </form>

        <div class="reviews-strip">
          <div style="display:flex; justify-content:space-between; margin-bottom:10px;">
            <strong>–ü–æ—Å–ª–µ–¥–Ω–∏–µ –æ—Ç–∑—ã–≤—ã</strong>
            <button id="openAllBtn" type="button" class="btn-outline" style="padding:4px 10px; font-size:12px; border-radius:12px;">–í—Å–µ –æ—Ç–∑—ã–≤—ã</button>
          </div>
          <div id="reviewsTrack" class="strip-track">
            <div class="review-mini"><div class="mini-text">–ó–∞–≥—Ä—É–∂–∞–µ–º –Ω–æ–≤–æ–≥–æ–¥–Ω–µ–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ...</div></div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <footer>
    <div class="container">
      <p style="font-size:1.4rem; font-family:'Playfair Display', serif;">–ü–æ–ª–æ–≤–∏–Ω–∫–∏</p>
      <p>–ü—É—Å—Ç—å –≤–∞—à –ù–æ–≤—ã–π –≥–æ–¥ –±—É–¥–µ—Ç —Å–ª–∞–¥–∫–∏–º –∏ —É—é—Ç–Ω—ã–º!</p>

      <div class="footer-actions">
        <a class="btn-outline" href="https://www.instagram.com/polovinki_kmv?igsh=Nm4wN3A0YnRlZDMy" target="_blank" rel="noopener">–ú—ã –≤ Instagram</a>
      </div>

      <p style="font-size:0.8rem; opacity:0.6; margin-top:14px;">&copy; 2025 –î–æ–º–∞—à–Ω—è—è –∫–æ–Ω–¥–∏—Ç–µ—Ä—Å–∫–∞—è –ö–ú–í</p>
    </div>
  </footer>

  <dialog id="reviewModal">
    <div class="modal-body">
      <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:10px;">
        <h3 id="modalName" style="margin:0">–ò–º—è</h3>
        <button id="modalClose" class="modal-close">‚úï</button>
      </div>
      <div id="modalStars" class="stars"></div>
      <p id="modalText" style="margin-top:10px; white-space: pre-wrap;"></p>
      <small id="modalDate" style="color:var(--muted)"></small>
    </div>
  </dialog>

  <dialog id="allReviewsModal">
    <div class="modal-body" style="max-height:80vh; overflow-y:auto;">
      <div style="display:flex; justify-content:space-between; margin-bottom:20px;">
        <h3 style="margin:0">–í—Å–µ –æ—Ç–∑—ã–≤—ã</h3>
        <button id="allClose" class="modal-close">–ó–∞–∫—Ä—ã—Ç—å</button>
      </div>
      <div id="allReviewsContainer"></div>
    </div>
  </dialog>

  <script>
    // –ê–ù–ò–ú–ê–¶–ò–Ø –ü–û–Ø–í–õ–ï–ù–ò–Ø
    const faders = document.querySelectorAll('.fade-in');
    const observer = new IntersectionObserver((entries, obs) => {
      entries.forEach(entry => {
        if (!entry.isIntersecting) return;
        entry.target.classList.add('visible');
        obs.unobserve(entry.target);
      });
    }, { threshold: 0.1 });
    faders.forEach(f => observer.observe(f));

    // ====== –ì–ò–†–õ–Ø–ù–î–ê: –ª–∞–º–ø—ã ‚Äú–ø—Ä–∏–∫–ª–µ–µ–Ω—ã‚Äù –∫ –ø—Ä–æ–≤–æ–¥—É ======
    (function buildGarland(){
      const svg = document.querySelector('.garland');
      const wire = svg?.querySelector('#wirePath');
      const mount = svg?.querySelector('#bulbs');
      if(!svg || !wire || !mount) return;

      const colors = [
        { c:'#ff4d4d', cls:'blink-a' },
        { c:'#ffd700', cls:'blink-b' },
        { c:'#4caf50', cls:'blink-c' },
        { c:'#2196f3', cls:'blink-a' },
      ];

      const offsets = [0.08,0.15,0.23,0.31,0.40,0.49,0.58,0.68,0.78,0.88,0.94];
      const L = wire.getTotalLength();

      function bulbSVG(color, cls){
        return `
          <g class="bulb ${cls}" filter="url(#softShadow)">
            <path d="M0 0 L0 12" stroke="#1a1a1a" stroke-width="2" stroke-linecap="round"/>
            <rect x="-7" y="12" width="14" height="10" rx="3" fill="#2b2b2b"/>
            <rect x="-7" y="12" width="14" height="3" rx="2" fill="rgba(255,255,255,0.18)"/>
            <circle cx="0" cy="32" r="10.5" fill="${color}" filter="url(#glow)" opacity="0.92"/>
            <circle cx="0" cy="32" r="9.5" fill="url(#glass)"/>
          </g>
        `;
      }

      function angleAt(t){
        const p = wire.getPointAtLength(t);
        const p2 = wire.getPointAtLength(Math.min(L, t + 1));
        const a = Math.atan2(p2.y - p.y, p2.x - p.x) * 180 / Math.PI;
        return { x:p.x, y:p.y, a };
      }

      mount.innerHTML = '';
      offsets.forEach((o,i)=>{
        const t = o * L;
        const {x,y,a} = angleAt(t);
        const pick = colors[i % colors.length];

        const g = document.createElementNS('http://www.w3.org/2000/svg','g');
        const tilt = a * 0.35;
        g.setAttribute('transform', `translate(${x} ${y}) rotate(${tilt})`);
        g.innerHTML = bulbSVG(pick.c, pick.cls);
        mount.appendChild(g);
      });
    })();

    // ===== –õ–æ–≥–∏–∫–∞ —Ñ–æ—Ä–º—ã –∑–∞–∫–∞–∑–∞ (–≤–∞—à–∞, –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–∞ –±–µ–∑ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤) =====
    const PRICE_PER_BOX = 250;
    const qtyEl = document.getElementById('qty');
    const totalTextEl = document.getElementById('total-text');
    const qtyTextEl = document.getElementById('qty-text');
    const methodEl = document.getElementById('method');
    const addressRow = document.getElementById('address-row');
    const form = document.getElementById('order-form');
    const statusEl = document.getElementById('form-status');
    const submitBtn = document.getElementById('submit-btn');

    // === –ü–∞—Ä–∞–º–µ—Ç—Ä—ã Telegram —á–µ—Ä–µ–∑ Google Apps Script ===
    const TG_ENDPOINT = 'https://script.google.com/macros/s/AKfycbyHLwMieXZw_2eAf-A7w_75gO4nTuzbAOGIuZgJdDHdUsIdUlhLtSc9tCZ2zUI15ppZpw/exec';
    const TG_SECRET = 'PolovinkiKmV25';

    function formatRUB(v){
      try { return new Intl.NumberFormat('ru-RU',{style:'currency',currency:'RUB',maximumFractionDigits:0}).format(v); }
      catch { return Math.round(v)+' ‚ÇΩ'; }
    }
    function updateSummary(){
      const qty = parseInt(qtyEl.value,10) || 1;
      const total = qty * PRICE_PER_BOX;
      totalTextEl.textContent = formatRUB(total);
      qtyTextEl.textContent = String(qty);
    }
    qtyEl?.addEventListener('change', updateSummary);
    updateSummary();

    methodEl?.addEventListener('change', () => {
      addressRow.style.display = (methodEl.value === 'delivery') ? '' : 'none';
    });

    form?.addEventListener('submit', async (e) => {
      e.preventDefault();

      const name = document.getElementById('name').value.trim();
      const phone = document.getElementById('phone').value.trim();
      const social = document.getElementById('social').value.trim();
      const qty = parseInt(qtyEl.value, 10) || 1;
      const date = document.getElementById('date').value;
      const time = document.getElementById('time').value;
      const method = methodEl.value;
      const address = (document.getElementById('address').value || '').trim();
      const comment = (document.getElementById('comment').value || '').trim();

      if(!name || !phone || !date){
        alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –∏–º—è, —Ç–µ–ª–µ—Ñ–æ–Ω –∏ –¥–∞—Ç—É –ø–æ–ª—É—á–µ–Ω–∏—è.');
        return;
      }
      if(method === 'delivery' && !address){
        alert('–£–∫–∞–∂–∏—Ç–µ –∞–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏.');
        return;
      }

      const total = qty * PRICE_PER_BOX;
      const payload = {
        product:'–ö–æ—Ä–æ–±–æ—á–∫–∞ –æ—Ä–µ—à–∫–æ–≤ (6 —à—Ç)',
        unit_price: PRICE_PER_BOX + ' ‚ÇΩ',
        quantity: qty,
        total: total + ' ‚ÇΩ',
        date, time,
        method: method === 'pickup' ? '–°–∞–º–æ–≤—ã–≤–æ–∑' : '–î–æ—Å—Ç–∞–≤–∫–∞',
        address: method === 'delivery' ? address : '',
        name, phone, social, comment
      };

      submitBtn.disabled = true;
      submitBtn.textContent = '–û—Ç–ø—Ä–∞–≤–ª—è–µ–º...';
      statusEl.style.display = 'block';
      statusEl.textContent = '–û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–∫–∞–∑...';

      try{
        // 1) Formspree
        const resp = await fetch('https://formspree.io/f/xgvleerr',{
          method:'POST',
          headers:{'Accept':'application/json','Content-Type':'application/json'},
          body: JSON.stringify(payload)
        });

        // 2) –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ ‚Äî Google Apps Script (Telegram)
        const tgPayload = { ...payload, secret: TG_SECRET, origin: location.origin };
        fetch(TG_ENDPOINT, {
          method:'POST',
          headers:{'Content-Type':'text/plain;charset=utf-8'},
          body: JSON.stringify(tgPayload)
        }).catch(err => console.error('TG relay failed:', err));

        if(resp.ok){
          form.reset();
          updateSummary();
          addressRow.style.display = 'none';
          statusEl.innerHTML = '–°–ø–∞—Å–∏–±–æ –∑–∞ –∑–∞–∫–∞–∑! –ú—ã —Å –≤–∞–º–∏ —Å–≤—è–∂–µ–º—Å—è‚Ä¶';
        } else {
          statusEl.textContent = '–ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–∫–∞–∑. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â—ë —Ä–∞–∑ –∏–ª–∏ —Å–≤—è–∂–∏—Ç–µ—Å—å —Å –Ω–∞–º–∏.';
        }
      }catch(e){
        console.error(e);
        statusEl.textContent = '–°–µ—Ç—å –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞.';
      }finally{
        submitBtn.disabled = false;
        submitBtn.textContent = '–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–∫–∞–∑';
      }
    });

    // –û–¢–ó–´–í–´
    const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbwAaB9udbz_EHUWPqvSca8Ve3p_D_8thmGDv1MZOLQzJ09vStTb6A89Gizp9zEePdMj/exec';
    function stars(n){ return '‚òÖ'.repeat(n) + '‚òÜ'.repeat(5-n); }
    async function loadReviews(){
      const track = document.getElementById('reviewsTrack');
      try{
        const res = await fetch(SCRIPT_URL + '?limit=10');
        const json = await res.json();
        const items = (json.items || []).reverse();
        track.innerHTML = items.map((r,i)=>`
          <div class="review-mini" onclick="showReview(${i})">
            <div style="display:flex;justify-content:space-between;gap:10px;align-items:center;">
              <strong>${r.name}</strong>
              <span class="stars">${stars(r.rating)}</span>
            </div>
            <div style="font-size:0.9rem;overflow:hidden;">${r.text}</div>
          </div>`).join('');
        window.revs = items;
      }catch(e){
        track.innerHTML = '–û—Ç–∑—ã–≤—ã –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã.';
      }
    }
    window.showReview = (i)=>{
      const r = window.revs[i];
      document.getElementById('modalName').textContent = r.name;
      document.getElementById('modalStars').textContent = stars(r.rating);
      document.getElementById('modalText').textContent = r.text;
      document.getElementById('reviewModal').showModal();
    };
    document.getElementById('modalClose').onclick = ()=>document.getElementById('reviewModal').close();
    loadReviews();

    // –°–ù–ï–ì
    (function(){
      const cvs = document.getElementById('snow-canvas');
      const ctx = cvs.getContext('2d');
      let w,h,flakes=[];
      function resize(){ w=cvs.width=window.innerWidth; h=cvs.height=window.innerHeight; }
      window.addEventListener('resize', resize); resize();
      for(let i=0;i<80;i++) flakes.push({x:Math.random()*w,y:Math.random()*h,r:Math.random()*3+1,s:Math.random()*1+0.5});
      function draw(){
        ctx.clearRect(0,0,w,h);
        ctx.fillStyle="#fff";
        ctx.beginPath();
        for(const f of flakes){
          ctx.moveTo(f.x,f.y);
          ctx.arc(f.x,f.y,f.r,0,Math.PI*2);
          f.y += f.s;
          if(f.y>h) f.y=-10;
        }
        ctx.fill();
        requestAnimationFrame(draw);
      }
      draw();
    })();
  </script>
</body>
</html>
